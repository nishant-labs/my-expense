import{r as c,m as l,j as a,n as b,A as G,o as C,p as k,B as H,q as L,s as V}from"./vendor-foZfMBSG.js";import{u as X,g as K,t as _,M as Z}from"./TransactionUtils-1FhhBK7l.js";import{G as q}from"./selector-JKYQ24bE.js";import{f as v}from"./NumberUtils-k5G2yZel.js";import"./index-JQHhOuWj.js";import"./selector-McJhBYGT.js";var O={},p=l&&l.__assign||function(){return p=Object.assign||function(t){for(var e,r=1,s=arguments.length;r<s;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},p.apply(this,arguments)},W=l&&l.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,n)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),$=l&&l.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),J=l&&l.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&W(e,t,r);return $(e,t),e};Object.defineProperty(O,"__esModule",{value:!0});var S=J(c),N=c,Q=function(t){var e=p({cardStyles:{back:{},front:{}},cardZIndex:"auto",containerStyle:{},flipDirection:"horizontal",flipSpeedBackToFront:.6,flipSpeedFrontToBack:.6,infinite:!1,isFlipped:!1},t),r=e.cardStyles,s=r.back,n=r.front,o=e.cardZIndex,d=e.containerStyle,u=e.containerClassName,f=e.flipDirection,m=e.flipSpeedFrontToBack,g=e.flipSpeedBackToFront,h=e.infinite,i=e.isFlipped,F=(0,N.useState)(i),D=F[0],E=F[1],T=(0,N.useState)(0),y=T[0],R=T[1];(0,N.useEffect)(function(){i!==D&&(E(i),R(function(x){return x+180}))},[i]);var A=(0,N.useMemo)(function(){var x="react-card-flip";return u&&(x+=" ".concat(u)),x},[u]),w=function(x){if(t.children.length!==2)throw new Error("Component ReactCardFlip requires 2 children to function");return t.children[x]},I="rotateY(".concat(h?y:i?180:0,"deg)"),Y="rotateY(".concat(h?y+180:i?0:-180,"deg)"),P="rotateX(".concat(h?y:i?180:0,"deg)"),z="rotateX(".concat(h?y+180:i?0:-180,"deg)"),j={back:p({WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",height:"100%",left:"0",position:i?"relative":"absolute",top:"0",transform:f==="horizontal"?Y:z,transformStyle:"preserve-3d",transition:"".concat(m,"s"),width:"100%"},s),container:{perspective:"1000px",zIndex:"".concat(o)},flipper:{height:"100%",position:"relative",width:"100%"},front:p({WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",height:"100%",left:"0",position:i?"absolute":"relative",top:"0",transform:f==="horizontal"?I:P,transformStyle:"preserve-3d",transition:"".concat(g,"s"),width:"100%",zIndex:"2"},n)};return S.createElement("div",{className:A,style:p(p({},j.container),d)},S.createElement("div",{className:"react-card-flipper",style:j.flipper},S.createElement("div",{className:"react-card-front",style:j.front},w(0)),S.createElement("div",{className:"react-card-back",style:j.back},w(1))))},U=O.default=Q;const ee={sortable:!0},te=[{headerName:"Group",field:"groupName"},{headerName:"Budget",field:"amount",width:120,type:"rightAligned",valueFormatter:t=>v(parseInt(t.value??"0"),!1)},{headerName:"Amount",field:"amount",width:120,type:"rightAligned",valueFormatter:t=>v(parseInt(t.value??"0"),!1)}],ae=({transactionList:t})=>a.jsx(q,{rowHeight:25,styles:{height:"100%"},defaultColDef:ee,colDefs:te,rowData:t,pagination:!1}),B=({height:t="250px",body:e,children:r,actionText:s,onClick:n})=>a.jsx("div",{className:"rounded",style:{height:t,boxShadow:"#3399F3 5px 5px 5px"},children:a.jsxs(b,{className:"h-100",children:[e?a.jsxs(b.Body,{className:"border-bottom text-center",children:[a.jsx(b.Title,{className:"text-black-50",children:e.title}),a.jsx(b.Text,{className:"p-1 display-6",children:e.text})]}):r,a.jsx(b.Footer,{className:"ms-auto border-0",children:a.jsx(b.Link,{href:"#",onClick:n,children:s})})]})}),ne=({title:t,total:e,transactions:r})=>{const[s,n]=c.useState(!1),o=c.useCallback(()=>{n(!s)},[s]),d=v(e,!1);return a.jsxs(U,{isFlipped:s,children:[a.jsx(B,{body:{title:t,text:d},actionText:"Breakdown",onClick:o}),a.jsx(B,{actionText:"Summary",onClick:o,children:a.jsx(ae,{transactionList:r})})]})},re=({year:t,month:e})=>{const{transactions:r}=X(t,e),s=c.useMemo(()=>K(r),[r]),n=c.useMemo(()=>{const u=s.filter(i=>i.isAccount),{credit:f,debit:m}=Object.groupBy(u,i=>i.isExpense?"debit":"credit");if(!f||!m)return 0;const g=_(f.map(({transactions:i})=>_(i))),h=_(m.map(({transactions:i})=>_(i)));return g-Math.abs(h)},[s]);if(r.length===0)return a.jsx(G,{variant:"warning",children:"Transaction Missing, please upload for the month"});const o=a.jsxs("span",{children:["You have saved ",a.jsx("strong",{children:v(n)})]}),d=a.jsxs("span",{children:["You have spend ",a.jsx("strong",{children:v(n)})," more than you income"]});return a.jsxs(a.Fragment,{children:[a.jsx(C,{className:"mb-3",children:a.jsx(k,{children:a.jsx("h5",{children:a.jsx(H,{bg:n>0?"info":"warning",children:n>0?o:d})})})}),a.jsx(C,{className:"row-cols-3",children:s.map(({title:u,total:f,transactions:m},g)=>a.jsx(k,{className:"mb-4",children:a.jsx(ne,{title:u,total:f,transactions:m})},`income-${g}`))})]})},[ue,...M]=Z,fe=()=>{const[t,e]=c.useState(M[0].label.toLowerCase()),{month:r,year:s}=c.useMemo(()=>{const n=new Date;return n.setMonth(n.getMonth()-1),{month:n.getMonth(),year:n.getFullYear().toString()}},[]);return a.jsxs(a.Fragment,{children:[a.jsx("h2",{children:"Monthly Expense Report"}),a.jsx(L,{id:"controlled-tab-example",activeKey:t,onSelect:n=>e(n),className:"mb-3",children:M.map(({label:n,value:o},d)=>a.jsx(V,{eventKey:n.toLowerCase(),title:n,disabled:d>r,mountOnEnter:!0,unmountOnExit:!0,children:a.jsx(re,{month:o,year:s})},o))})]})};export{fe as default};
