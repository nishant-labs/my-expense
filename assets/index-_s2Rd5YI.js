import{z as v,u as j,y as N,r,j as t,q as b,s as C,F as U,w as I}from"./vendor-Ce-Gnf-x.js";import{s as D}from"./index-DLsNo65D.js";import{h as O,a as q,b as G,G as A}from"./ApiBase-ConkYzvp.js";import{Q as E,E as x,w}from"./index-DIhr6zDb.js";const F=(a,o,s)=>[{headerName:"Name",field:"name"},{headerName:"Expense flag",field:"isExpense"},{headerName:"Chart Color",field:"chartColor",minWidth:100,cellStyle:e=>({backgroundColor:e.value,color:"white"})},{headerName:"Action",type:"rightAligned",minWidth:140,cellRenderer:"rowActionCellRenderer",cellRendererParams:{deleteItem:a,toggleItem:o,editItem:s}}],_=()=>v({queryKey:E.SOURCE_SETTINGS,meta:{endpoint:x.SOURCE_SETTINGS}}),M=()=>{var s,e;const a=j(),o=(e=(s=a.getDefaultOptions().queries)==null?void 0:s.meta)==null?void 0:e.baseUrl;return N({mutationFn:l=>O(`${o}${x.SOURCE_SETTINGS}`,l),onSuccess:()=>{a.invalidateQueries({queryKey:E.SOURCE_SETTINGS})}})},$=()=>{var s,e;const a=j(),o=(e=(s=a.getDefaultOptions().queries)==null?void 0:s.meta)==null?void 0:e.baseUrl;return N({mutationFn:l=>q(`${o}${x.SOURCE_SETTINGS}/${l.id}`,l.payload),onSuccess:()=>{a.invalidateQueries({queryKey:E.SOURCE_SETTINGS})}})},Q=()=>{var s,e;const a=j(),o=(e=(s=a.getDefaultOptions().queries)==null?void 0:s.meta)==null?void 0:e.baseUrl;return N({mutationFn:l=>G(`${o}${x.SOURCE_SETTINGS}/${l}`),onSuccess:()=>{a.invalidateQueries({queryKey:E.SOURCE_SETTINGS})}})};function L(){const a=_(),o=M(),s=Q(),e=$(),l=r.useCallback(async(n,i,c)=>o.mutateAsync({name:n,chartColor:i,isExpense:c}),[o]),y=r.useCallback(async(n,i,c,S)=>e.mutateAsync({id:n,payload:{name:i,chartColor:c,isExpense:S}}),[e]),d=r.useCallback(async n=>s.mutateAsync(n.id),[s]),p=r.useCallback(async n=>e.mutateAsync({id:n.id,payload:{isEnabled:!n.isEnabled}}),[e]);return{sourceList:a.data,error:o.error||e.error||s.error,onSave:l,onUpdate:y,onDelete:d,onToggleStatus:p}}const K=()=>{const{error:a,sourceList:o,onDelete:s,onSave:e,onToggleStatus:l,onUpdate:y}=L(),[d,p]=r.useState(null),[n,i]=r.useState("#000000"),[c,S]=r.useState(""),[h,g]=r.useState(null),m=r.useCallback(()=>{p(null),S(""),i(""),g(null)},[]),f=r.useCallback(()=>{e(c,n,h).then(()=>{m()})},[e,c,n,h,m]),k=r.useCallback(()=>{y(d,c,n,h).then(()=>{m()})},[y,d,c,n,h,m]),T=r.useCallback(u=>{p(u.id),S(u.name),i(u.chartColor),g(u.isExpense)},[]),R=r.useMemo(()=>F(s,l,T),[s,l,T]);return t.jsxs(t.Fragment,{children:[t.jsx("h2",{children:"Source Settings"}),t.jsxs(b,{className:"mb-2",children:[t.jsx(C,{sm:4,children:t.jsx(U.Control,{placeholder:"Enter Label",value:c,onChange:u=>S(u.target.value)})}),t.jsx(C,{sm:1,children:t.jsx(U.Check,{onChange:u=>g(u.target.checked),checked:h,label:"Expense",type:"checkbox"})}),t.jsx(C,{sm:1,children:t.jsx(U.Control,{type:"color",value:n,onChange:u=>i(u.target.value),title:"Choose your color"})})]}),t.jsx(b,{children:t.jsxs(C,{className:"text-end",children:[t.jsx(I,{className:"mx-2",disabled:!c||!n,onClick:d?k:f,children:d?"Update":"Add Source"}),t.jsx(I,{variant:"outline-secondary",onClick:m,children:"Clear"})]})}),t.jsx(b,{children:t.jsxs(C,{children:[t.jsx("p",{children:a==null?void 0:a.error}),t.jsx(A,{colDefs:R,rowData:o,components:D})]})})]})},z=w(K);export{K as SourceSettings,z as default};
