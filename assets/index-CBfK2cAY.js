import{H as v,u as j,G as N,r,j as t,x as b,y as C,F as U,E as I}from"./vendor-BiCOzrMY.js";import{s as D}from"./index-BvpDcwIy.js";import{h as G,a as O,b as q,G as A}from"./ApiBase-DcR9eLOQ.js";import{Q as E,E as x,w as F}from"./index-Do_MZewB.js";import"./defineProperty-ChkGiTEg.js";const _=(a,o,s)=>[{headerName:"Name",field:"name"},{headerName:"Expense flag",field:"isExpense"},{headerName:"Chart Color",field:"chartColor",minWidth:100,cellStyle:e=>({backgroundColor:e.value,color:"white"})},{headerName:"Action",type:"rightAligned",minWidth:140,cellRenderer:"rowActionCellRenderer",cellRendererParams:{deleteItem:a,toggleItem:o,editItem:s}}],w=()=>v({queryKey:E.SOURCE_SETTINGS,meta:{endpoint:x.SOURCE_SETTINGS}}),M=()=>{var s,e;const a=j(),o=(e=(s=a.getDefaultOptions().queries)==null?void 0:s.meta)==null?void 0:e.baseUrl;return N({mutationFn:l=>G(`${o}${x.SOURCE_SETTINGS}`,l),onSuccess:()=>{a.invalidateQueries({queryKey:E.SOURCE_SETTINGS})}})},$=()=>{var s,e;const a=j(),o=(e=(s=a.getDefaultOptions().queries)==null?void 0:s.meta)==null?void 0:e.baseUrl;return N({mutationFn:l=>O(`${o}${x.SOURCE_SETTINGS}/${l.id}`,l.payload),onSuccess:()=>{a.invalidateQueries({queryKey:E.SOURCE_SETTINGS})}})},Q=()=>{var s,e;const a=j(),o=(e=(s=a.getDefaultOptions().queries)==null?void 0:s.meta)==null?void 0:e.baseUrl;return N({mutationFn:l=>q(`${o}${x.SOURCE_SETTINGS}/${l}`),onSuccess:()=>{a.invalidateQueries({queryKey:E.SOURCE_SETTINGS})}})};function L(){const a=w(),o=M(),s=Q(),e=$(),l=r.useCallback(async(n,i,c)=>o.mutateAsync({name:n,chartColor:i,isExpense:c}),[o]),p=r.useCallback(async(n,i,c,S)=>e.mutateAsync({id:n,payload:{name:i,chartColor:c,isExpense:S}}),[e]),d=r.useCallback(async n=>s.mutateAsync(n.id),[s]),y=r.useCallback(async n=>e.mutateAsync({id:n.id,payload:{isEnabled:!n.isEnabled}}),[e]);return{sourceList:a.data,error:o.error||e.error||s.error,onSave:l,onUpdate:p,onDelete:d,onToggleStatus:y}}const K=()=>{const{error:a,sourceList:o,onDelete:s,onSave:e,onToggleStatus:l,onUpdate:p}=L(),[d,y]=r.useState(null),[n,i]=r.useState("#000000"),[c,S]=r.useState(""),[h,g]=r.useState(null),m=r.useCallback(()=>{y(null),S(""),i(""),g(null)},[]),f=r.useCallback(()=>{e(c,n,h).then(()=>{m()})},[e,c,n,h,m]),k=r.useCallback(()=>{p(d,c,n,h).then(()=>{m()})},[p,d,c,n,h,m]),T=r.useCallback(u=>{y(u.id),S(u.name),i(u.chartColor),g(u.isExpense)},[]),R=r.useMemo(()=>_(s,l,T),[s,l,T]);return t.jsxs(t.Fragment,{children:[t.jsx("h2",{children:"Source Settings"}),t.jsxs(b,{className:"mb-2",children:[t.jsx(C,{sm:4,children:t.jsx(U.Control,{placeholder:"Enter Label",value:c,onChange:u=>S(u.target.value)})}),t.jsx(C,{sm:1,children:t.jsx(U.Check,{onChange:u=>g(u.target.checked),checked:h,label:"Expense",type:"checkbox"})}),t.jsx(C,{sm:1,children:t.jsx(U.Control,{type:"color",value:n,onChange:u=>i(u.target.value),title:"Choose your color"})})]}),t.jsx(b,{children:t.jsxs(C,{className:"text-end",children:[t.jsx(I,{className:"mx-2",disabled:!c||!n,onClick:d?k:f,children:d?"Update":"Add Source"}),t.jsx(I,{variant:"outline-secondary",onClick:m,children:"Clear"})]})}),t.jsx(b,{children:t.jsxs(C,{children:[t.jsx("p",{children:a==null?void 0:a.error}),t.jsx(A,{colDefs:R,rowData:o,components:D})]})})]})},z=F(K);export{K as SourceSettings,z as default};
