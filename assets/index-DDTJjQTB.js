import{I as A,f,H as I,r as o,W as E,j as e,q as D,a as U,C as b,F as w,E as j,X as q,_ as F,Z as G,B as N}from"./vendor-Dobm3Lbi.js";import{s as v}from"./index-RR0uIUn3.js";import{h as _,a as M,b as $,G as Q}from"./ApiBase-DjuaOdbS.js";import{Q as y,E as x,w as W}from"./index-C2PfOp2L.js";const z=(s,r,a)=>[{headerName:"Name",field:"name"},{headerName:"Expense flag",field:"isExpense",minWidth:150,maxWidth:150},{headerName:"Chart Color",field:"chartColor",minWidth:150,maxWidth:150,cellStyle:t=>({backgroundColor:t.value,color:"white"})},{headerName:"Action",type:"rightAligned",minWidth:150,maxWidth:150,suppressAutoSize:!0,suppressSizeToFit:!0,sortable:!1,cellRenderer:"rowActionCellRenderer",cellRendererParams:{deleteItem:s,toggleItem:r,editItem:a}}],B=()=>A({queryKey:y.SOURCE_SETTINGS,meta:{endpoint:x.SOURCE_SETTINGS}}),K=()=>{var a,t;const s=f(),r=(t=(a=s.getDefaultOptions().queries)==null?void 0:a.meta)==null?void 0:t.baseUrl;return I({mutationFn:l=>_(`${r}${x.SOURCE_SETTINGS}`,l),onSuccess:()=>{s.invalidateQueries({queryKey:y.SOURCE_SETTINGS})}})},L=()=>{var a,t;const s=f(),r=(t=(a=s.getDefaultOptions().queries)==null?void 0:a.meta)==null?void 0:t.baseUrl;return I({mutationFn:l=>M(`${r}${x.SOURCE_SETTINGS}/${l.id}`,l.payload),onSuccess:()=>{s.invalidateQueries({queryKey:y.SOURCE_SETTINGS})}})},P=()=>{var a,t;const s=f(),r=(t=(a=s.getDefaultOptions().queries)==null?void 0:a.meta)==null?void 0:t.baseUrl;return I({mutationFn:l=>$(`${r}${x.SOURCE_SETTINGS}/${l}`),onSuccess:()=>{s.invalidateQueries({queryKey:y.SOURCE_SETTINGS})}})};function H(){const s=B(),r=K(),a=P(),t=L(),l=o.useCallback(async(n,u,c)=>r.mutateAsync({name:n,chartColor:u,isExpense:c}),[r]),p=o.useCallback(async(n,u,c,S)=>t.mutateAsync({id:n,payload:{name:u,chartColor:c,isExpense:S}}),[t]),d=o.useCallback(async n=>a.mutateAsync(n.id),[a]),C=o.useCallback(async n=>t.mutateAsync({id:n.id,payload:{isEnabled:!n.isEnabled}}),[t]);return{sourceList:s.data,error:r.error||t.error||a.error,onSave:l,onUpdate:p,onDelete:d,onToggleStatus:C}}const Y=()=>{const{error:s,sourceList:r,onDelete:a,onSave:t,onToggleStatus:l,onUpdate:p}=H(),[d,C]=o.useState(null),[n,u]=o.useState(new E("#000000")),[c,S]=o.useState(""),[h,g]=o.useState(!1),m=o.useCallback(()=>{C(null),S(""),u(new E("#000000")),g(null)},[]),k=o.useCallback(async()=>{await t(c,n.toHexString(),h),m()},[t,c,n,h,m]),R=o.useCallback(async()=>{await p(d,c,n.toHexString(),h),m()},[p,d,c,n,h,m]),T=o.useCallback(i=>{C(i.id),S(i.name),u(new E(i.chartColor)),g(i.isExpense)},[]),O=o.useMemo(()=>z(a,l,T),[a,l,T]);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Source Settings"}),e.jsx(D,{title:"Source Settings",children:e.jsxs(U,{justify:"space-between",wrap:!1,children:[e.jsx(b,{span:10,children:e.jsxs(w,{gap:"middle",justify:"space-between",wrap:!1,children:[e.jsx(j.Item,{layout:"horizontal",label:"Enter Name",children:e.jsx(q,{value:c,onChange:i=>S(i.target.value)})}),e.jsx(j.Item,{layout:"horizontal",label:"Is Money Out",children:e.jsx(F,{checked:h,onChange:i=>g(i.target.checked)})}),e.jsx(j.Item,{layout:"horizontal",label:"Choose your color",children:e.jsx(G,{value:n,onChange:u})})]})}),e.jsx(b,{span:3,children:e.jsxs(w,{gap:"middle",justify:"end",wrap:!0,children:[e.jsx(N,{type:"primary",disabled:!c||!n,onClick:d?R:k,children:d?"Update":"Add Source"}),e.jsx(N,{onClick:m,children:"Clear"})]})})]})}),e.jsx(U,{children:e.jsxs(b,{span:24,children:[e.jsx("p",{children:s==null?void 0:s.error}),e.jsx(Q,{colDefs:O,rowData:r,components:v})]})})]})},ee=W(Y);export{Y as SourceSettings,ee as default};
